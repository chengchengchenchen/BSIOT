# 物联网设备管理平台 实验报告

## 介绍

物联网设备管理平台是一个基于Mosquitto、MySQL、React和Flask的综合网站平台，用于管理物联网设备、接收和统计设备数据。

## 系统架构

系统采用前后端分离架构，前端使用React构建用户界面，后端使用Flask处理业务逻辑和与数据库交互，而Mosquitto作为MQTT服务器用于接收和处理设备数据。

在开发和部署中，各个进程运行在同一IP地址上。

## 功能实现

1. 搭建一个 mqtt 服务器，能够接收指定的物联网终端模拟器发送的数据

   **实现：**mosquitto建立mqtt服务器，IOTclient生成并发送设备数据，IOTserver订阅对应topic，接受数据、处理并存储到mysql

   

2.  实现用户注册、登录功能，用户注册时需要填写必要的信息并验证，如用户名、密码要求在 6 字节以上，email 的格式验证，并保证用户名和 email 在系统中唯一。 

   **实现**：前端使用react antd组件构建登录输入框，并实现正则校验；后端在mysql中对用户名和email唯一性检查

   

3. 提供设备配置界面，可以创建或修改设备信息，包含必要信息，如设备 ID、设备名称、 设备类型等

   **实现**：前端使用antd中的Form组件，展示设备信息并提供修改、增加、删除功能；后端提供数据库操作

   

4. 提供设备上报数据的查询统计界面 

   **实现**：前端使用antd中的Table组件，根据设备ID展示最近50条数据；后端提供数据库操作

   

5. 提供地图界面展示设备信息，区分正常和告警信息，部分设备类型的历史数据可以展示成 q 历史轨迹

   **实现**：前端使用echart中的map，line，scatter组件，展示杭州地图下的设备位置、轨迹；后端根据时间戳顺序返回设备位置

   

6. 首页提供统计信息（设备总量、在线总量、接收的数据量等），以图表方式展示（柱状体、 折线图等）

   **实现**：前端使用echart中的bar组件，展示统计信息。其中设备总量=数据库中设备数，在线总量=发送过信息的设备数，告警设备=alert不为0的设备数；接收的数据量=每台设备在数据库中的信息条数

   

7. 样式适配手机端，能够在手机浏览器/微信等应用内置的浏览器中友好显示。

   **实现**：使用js的api获取窗口大小判断PC/移动端。PC端下导航栏在左侧，显示全部信息；移动端下导航栏在顶部，仅显示功能对应的图标

## 后端开发

1. IOT.py处理mqtt信息，格式化后存储到数据库中。
2. app.py使用flask框架，配置数据库连接、定义模型、编写API路由和业务逻辑。

## 前端开发

1. 使用React构建网站路由和界面，包括登录、注册、数据统计、设备配置、数据搜索和设备位置。
2. 使用react antd和react antd/design构建美观的用户界面。
3. 使用echarts绘制柱状图、地图、散点图和线图。

## 项目部署

git地址：https://github.com/chengchengchenchen/BSIOT.git

使用Docker Compose配置项目的部署环境。参考`docker-compose.yml`和`README.md`

##  开发体会

在开发物联网设备管理平台的过程中，我面临了许多挑战和学习机会。以下是一些开发体会：

1. **前后端分离的协同开发：** 
2. **Flask和React的组合：** 采用前后端分离的架构，使得前端和后端可以并行开发，提高了开发效率。通过定义清晰的API接口，便于功能测试，确保前后端的集成顺利。使用Flask作为后端框架，为我提供了简洁而强大的工具来处理业务逻辑和数据库交互。使用React作为前端框架已经封装好的组件库，使得界面的构建更加模块化和灵活。
3. **数据的处理和展示：** 在物联网平台中，数据的处理和展示是关键。通过使用echarts库，我能够轻松地绘制柱状图、地图、散点图和线图，使得用户能够直观地了解设备状态和数据趋势。
4. **响应式设计与移动端适配：** 通过响应式设计的原则，我确保了网站在不同设备上的友好显示。移动端适配是一个挑战，但通过使用响应式布局样式，我成功地使得网站在PC/移动端中能够良好显示。

在这个项目中，我不仅学到了如何使用各种技术来构建一个完整的物联网设备管理平台，还积累了在前后端协同开发、数据处理和展示等方面的经验。
